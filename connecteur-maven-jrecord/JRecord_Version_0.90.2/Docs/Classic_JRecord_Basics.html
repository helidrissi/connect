<h1><a id="basic">Using JRecord</a></h2>
<ul>
  <li><a href="#Concepts">JRecord Concepts</a>
  <li><a href="#BasicCobol">Basic Access to Cobol Files</a></li>
  <li><a href="#MultiRecord">Multi Record Cobol Files</a>
  <li><a href="#Csv">Reading and Writing Csv Files</a></li>
  <li><a href="#XmlSchema">Xml Schema</a>
  <li><a href="#RecordEditor">RecordEditor</a>
  <li><a href="#NoSchema">Fixed Width file no Cobol Copybook</a>
  <li><a href="#Utilities">Utilities</a>
  <li><a href="#manipulateSchema">Manipulating Schema's</a>
  <li><a href="#DuplicateFields">Duplicate Field names</a>
</ul>
 <h2>Introduction</h2>
 <p>This document quickly runs through some of the options available with the JRecord
 library. It only covers "<i>Clasic</i>" JRecord, it does not go into the new
 <a href="IOBuilders.htm">IOBuilder</a> classes available from  <font color="blue">JRecordInterface1</font>.
 You <font color="blue"><b>should</b></font> look at the <a href="IOBuilders.htm">IOBuilder's</a> before 
 looking at this documentt
 

 
 <h2><a id="Concepts">JRecord Concepts</a></h2>
 <p>JRecord is based on the following concepts:<ul>
   <li>Files have a Schema/Layout/(Cobol Copybook) that describes the file (JRecord-Class LayoutDetail)</li>
   <li>Files have a specific Organization or Structure (JRecord use file-Structure integer constants Constants.IO_TEXT or schema.getFileStructure()). 
   <li>Files consist of series of logical Records (JRecord-Class AbstractLine) and the file-schema
describes how they are physically organized in the file.</li>
</ul>

<p>Those from a Windows/Unix may think of records as lines of data terminated by the end-of-line character (\n).
But even in the Windows / Unix world there are exceptions e.g.<ul>
 <li>In Csv files,  \n can be embedded in fields surrounded by quotes.</li>
 <li>Logical records in Xml/JSON/YAML can be written across multiple lines.</li>
 <li>In Get-Text-PO files, each translation could be considered a Logical record
and written across multiple lines.
 <li>Binary formats like Protocol-Buffers, Avro, Thrift etc use length based records (like Cobol-VB files).</li>
</ul>
<p>In the Cobol world you have<ul>
 <li>Line-Sequential files (normal windows / Unix EOL-terminated text files.</li>
 <li>Fixed Width files. In a fixed width file all records are exactly the same length and
 there is no EOL character.</li>
 <li>VB file. These consist of a Length followed by the Data. Each Cobol dialect has
 its own VB format.
<pre>
       Record-Length data
       Record-Length data
       Record-Length data
       Record-Length data 
</pre> </li>
</ul>

<h2><a id="bldr">IO Builder classes</a></h2>
<p>In JRecord 0.80.8 a new IoBuilder class was introduced. This new Builder class will make it easy to create  Cobol-IO-readers and writers:

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">20 </font></span>        ICobolIOBuilder iob <font color="#000000"><strong>=</strong></font> CobolIoProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">21 </font></span>                .<font color="#9966ff">newIOBuilder</font><font color="#000000"><strong>(</strong></font>copybookName<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">22 </font></span>                    .<font color="#9966ff">setFont</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">cp037</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>                                   <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">US</font><font color="#ff8400"> </font><font color="#ff8400">EBCDIC</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">23 </font></span>                    .<font color="#9966ff">setFileOrganization</font><font color="#000000"><strong>(</strong></font>Constants.IO_FIXED_LENGTH_RECORDS<font color="#000000"><strong>)</strong></font>;  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">24 </font></span>        AbstractLineReader reader <font color="#000000"><strong>=</strong></font> iob.<font color="#9966ff">newReader</font><font color="#000000"><strong>(</strong></font>salesFile<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">25 </font></span>
</font></pre>

<p>If you are using JRecord to read / write Cobol files, you should find IOBuilders easier to use than the old methods. There are a number of sample 
<a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/iobuilder/">iobuilder</a> programs available.

<p>An example of Reading in a Cobol file and writing out a Different COBOL file follows:

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 6 </font></span>            ICobolIOBuilder iobIn  <font color="#000000"><strong>=</strong></font> CobolIoProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 7 </font></span>                                        .<font color="#9966ff">newIOBuilder</font><font color="#000000"><strong>(</strong></font>copybookName<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 8 </font></span>                                            .<font color="#9966ff">setFont</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">cp037</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>       
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 9 </font></span>                                            .<font color="#9966ff">setFileOrganization</font><font color="#000000"><strong>(</strong></font>Constants.IO_FIXED_LENGTH_RECORDS<font color="#000000"><strong>)</strong></font>;  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">10 </font></span>            ICobolIOBuilder iobOut  <font color="#000000"><strong>=</strong></font> CobolIoProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">11 </font></span>                                        .<font color="#9966ff">newIOBuilder</font><font color="#000000"><strong>(</strong></font>outCopybookame<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">12 </font></span>                                            .<font color="#9966ff">setFont</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">cp037</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>       
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">13 </font></span>                                            .<font color="#9966ff">setFileOrganization</font><font color="#000000"><strong>(</strong></font>Constants.IO_FIXED_LENGTH_RECORDS<font color="#000000"><strong>)</strong></font>;  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">14 </font></span>            AbstractLineReader reader <font color="#000000"><strong>=</strong></font> iobIn.<font color="#9966ff">newReader</font><font color="#000000"><strong>(</strong></font>salesFile<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">15 </font></span>            AbstractLineWriter writer <font color="#000000"><strong>=</strong></font> iobOut.<font color="#9966ff">newWriter</font><font color="#000000"><strong>(</strong></font>salesFileOut<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">16 </font></span>            AbstractLine outLine <font color="#000000"><strong>=</strong></font> iobOut.<font color="#9966ff">newLine</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">17 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">18 </font></span>            <font color="#006699"><strong>while</strong></font> <font color="#000000"><strong>(</strong></font><font color="#000000"><strong>(</strong></font>saleRecord <font color="#000000"><strong>=</strong></font> reader.<font color="#9966ff">read</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>!</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">19 </font></span>                <font color="#0099ff"><strong>long</strong></font> dateCCYYMMDD <font color="#000000"><strong>=</strong></font> <font color="#ff0000">20000000</font> <font color="#000000"><strong>+</strong></font> saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">DATE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asLong</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">20 </font></span>                price <font color="#000000"><strong>=</strong></font> saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asDouble</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">21 </font></span>                gstExclusive <font color="#000000"><strong>=</strong></font> price <font color="#000000"><strong>/</strong></font> GST_CONVERSION;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">22 </font></span>                gst <font color="#000000"><strong>=</strong></font> price <font color="#000000"><strong>-</strong></font> gstExclusive;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">23 </font></span>                
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">24 </font></span>                outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR023</font><font color="#ff00cc">-</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">25 </font></span>                outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR023</font><font color="#ff00cc">-</font><font color="#ff00cc">STORE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">STORE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">26 </font></span>                outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR023</font><font color="#ff00cc">-</font><font color="#ff00cc">DATE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>dateCCYYMMDD<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">27 </font></span>                outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR023</font><font color="#ff00cc">-</font><font color="#ff00cc">QTY</font><font color="#ff00cc">-</font><font color="#ff00cc">SOLD</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">QTY</font><font color="#ff00cc">-</font><font color="#ff00cc">SOLD</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">28 </font></span>                outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR023</font><font color="#ff00cc">-</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">29 </font></span>                outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR023</font><font color="#ff00cc">-</font><font color="#ff00cc">GST</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>gst<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">30 </font></span> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">31 </font></span>                writer.<font color="#9966ff">write</font><font color="#000000"><strong>(</strong></font>outLine<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">32 </font></span>            <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">33 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">34 </font></span>            reader.<font color="#9966ff">close</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">35 </font></span>            writer.<font color="#9966ff">close</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">36 </font></span>
</font></pre>



<p><b>Note:</b> In the future I will extend IOBuilders to RecordEditor-Xml schema's and Csv Definition as well.
 
<h2><a id="BasicCobol">Basic Access to Cobol Files</a></h2>
 <p>There are a number of sample <a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/readWrite/">Basic Cobol File examples</a> available.
 I would also advise you to download and install the <a href="https://sourceforge.net/projects/record-editor/">RecordEditor</a>. 
 The <b>RecordEditor</b> will let you view/edit, compare your cobol files. <b>RecordEditor</b> schemas can be exported as Xml and 
 used in JRecord.
 
 <p>A basic <b>Read</b> Program would look like:
 
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">20 </font></span>        ICobolIOBuilder iob <font color="#000000"><strong>=</strong></font> CobolIoProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">21 </font></span>                .<font color="#9966ff">newIOBuilder</font><font color="#000000"><strong>(</strong></font>copybookName<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">22 </font></span>                    .<font color="#9966ff">setFont</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">cp037</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>                                   <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">US</font><font color="#ff8400"> </font><font color="#ff8400">EBCDIC</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">23 </font></span>                    .<font color="#9966ff">setFileOrganization</font><font color="#000000"><strong>(</strong></font>Constants.IO_FIXED_LENGTH_RECORDS<font color="#000000"><strong>)</strong></font>;  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">24 </font></span>        AbstractLineReader reader <font color="#000000"><strong>=</strong></font> iob.<font color="#9966ff">newReader</font><font color="#000000"><strong>(</strong></font>salesFile<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">25 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">26 </font></span>        <font color="#006699"><strong>while</strong></font> <font color="#000000"><strong>(</strong></font><font color="#000000"><strong>(</strong></font>saleRecord <font color="#000000"><strong>=</strong></font> reader.<font color="#9966ff">read</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>!</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">27 </font></span>            lineNum <font color="#000000"><strong>+</strong></font><font color="#000000"><strong>=</strong></font> <font color="#ff0000">1</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">28 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">29 </font></span>            System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">30 </font></span>                    <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">QTY</font><font color="#ff00cc">-</font><font color="#ff00cc">SOLD</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">31 </font></span>                    <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">-</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">32 </font></span>        <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">33 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">34 </font></span>        reader.<font color="#9966ff">close</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
</font></pre>

<p>A basic <b>Write</b> Program would look like:
 
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span>            String installDir     <font color="#000000"><strong>=</strong></font> TstConstants.SAMPLE_DIRECTORY;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>            String salesFileOut   <font color="#000000"><strong>=</strong></font> installDir <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020out8</font><font color="#ff00cc">.</font><font color="#ff00cc">bin</font><font color="#ff00cc">&quot;</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>            String copybookName   <font color="#000000"><strong>=</strong></font> TstConstants.RE_XML_DIRECTORY
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>                            <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">.</font><font color="#ff00cc">Xml</font><font color="#ff00cc">&quot;</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span>            <font color="#0099ff"><strong>int</strong></font> lineNum <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>            <font color="#006699"><strong>try</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>                <font color="#0099ff"><strong>int</strong></font> fileStructure <font color="#000000"><strong>=</strong></font> Constants.IO_FIXED_LENGTH;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span>                CopybookLoader loader <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>new</strong></font> <font color="#9966ff">RecordEditorXmlLoader</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span>                ExternalRecord extlayout <font color="#000000"><strong>=</strong></font> loader.<font color="#9966ff">loadCopyBook</font><font color="#000000"><strong>(</strong></font>copybookName, <font color="#ff0000">0</font>, <font color="#ff0000">0</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff0000">0</font>, <font color="#ff0000">0</font>, <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span>                <font color="#cc0000">/*</font><font color="#cc0000"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000">*</font><font color="#cc0000"> </font><font color="#cc0000">Converting</font><font color="#cc0000"> </font><font color="#cc0000">from</font><font color="#cc0000"> </font><font color="#cc0000">the</font><font color="#cc0000"> </font><font color="#cc0000">interchange</font><font color="#cc0000"> </font><font color="#cc0000">(ExternalRecord)</font><font color="#cc0000"> </font><font color="#cc0000">format</font><font color="#cc0000"> </font><font color="#cc0000">to</font><font color="#cc0000"> </font><font color="#cc0000">LayoutDetail</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  13 </font></span><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000"> </font><font color="#cc0000">*/</font>             
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  14 </font></span>                LayoutDetail layout <font color="#000000"><strong>=</strong></font> extlayout.<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  15 </font></span>                AbstractLine saleRecord <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>new</strong></font> <font color="#9966ff">Line</font><font color="#000000"><strong>(</strong></font>layout<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  16 </font></span>                AbstractLineWriter writer  <font color="#000000"><strong>=</strong></font> LineIOProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">getLineWriter</font><font color="#000000"><strong>(</strong></font>fileStructure<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  17 </font></span>                
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  18 </font></span>                writer.<font color="#9966ff">open</font><font color="#000000"><strong>(</strong></font>salesFileOut<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  19 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  20 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">1331</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  21 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">STORE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">1</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  22 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DATE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">80921</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  23 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DEPT</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">100</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  24 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">QTY</font><font color="#ff00cc">-</font><font color="#ff00cc">SOLD</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">7</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  25 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">7</font>.<font color="#ff0000">00</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  26 </font></span>                writer.<font color="#9966ff">write</font><font color="#000000"><strong>(</strong></font>saleRecord<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  27 </font></span>                
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  28 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">STORE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">11</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  29 </font></span>                writer.<font color="#9966ff">write</font><font color="#000000"><strong>(</strong></font>saleRecord<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  30 </font></span>                
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  31 </font></span>                saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">STORE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">121</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  32 </font></span>                writer.<font color="#9966ff">write</font><font color="#000000"><strong>(</strong></font>saleRecord<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  33 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  34 </font></span>                System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  35 </font></span>                writer.<font color="#9966ff">close</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  36 </font></span>
</font></pre>


 <h2><a id="MultiRecord">Multi Record Cobol Files</a></h2>
 <p>Multi-Record files are always a pain to deal with because:<ol>
   <li>There is no single way to write the Cobol Copybook.</li>
   <li>The Cobol Copybook does not distinguish the various records. There will be a <b>Local Standard</b> method
   of doing this (i.e. a field like <b>Record-Type</b> or <b>Record-Code</b> will be used).</li>
 </ol>
 <p>Ideally avoid multi-record files (or use Header-Detail or Header-Detail-Trailer records if you can). See
 <a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/multiRecord/">Multi Record Cobol File examples</a>.
 
 <h3>Ways of Defining Multi Record Files in Cobol</h3>
 <p>Controlling how copybooks are divided up is done by the <b>CopybookLoader.SPLIT_*</b> Constant:
 <pre>
	<font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span>
	<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>        ExternalRecord extlayoutCBL <font color="#000000"><strong>=</strong></font> loaderXML.<font color="#9966ff">loadCopyBook</font><font color="#000000"><strong>(</strong></font>
	<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>                        copyName ,<span style="background:yellow"> CopybookLoader.SPLIT_01_LEVEL, </span><font color="#ff0000">0</font>,
	<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>                                <font color="#cc0000">/*</font><font color="#cc0000"> </font><font color="#cc0000">Font</font><font color="#cc0000"> </font><font color="#cc0000">name</font><font color="#cc0000"> </font><font color="#cc0000">*/</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Convert.FMT_MAINFRAME, <font color="#ff0000">0</font>, <font color="#006699"><strong>new</strong></font> <font color="#9966ff">TextLog</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
	<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span>        
</font>
</pre>
 <p>Multi-Record Copybooks can be defined like: 
 <ul>
  <li>In seperate 01 levels. For this use <font color="blue">CopybookLoader.SPLIT_01_LEVEL</font>:
<pre>
<font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#ff0000">01</font>  Header-Record.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font>  record-type               <font color="#006699"><strong>pic</strong></font> x.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">......</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#ff0000">01</font>  Detail-Record.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font>  record-type               <font color="#006699"><strong>pic</strong></font> x.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">......</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>
</font></pre>
  </li>
  <li>Using Redefines. For this use <font color="blue">CopybookLoader.SPLIT_REDEFINE</font>:
<pre>
<font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#ff0000">01</font>  The-Records.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font>  record-type               <font color="#006699"><strong>pic</strong></font> x.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font>  Header-Record.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">......</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font>  Detail-Record   <span style="background:yellow"> <font color="#006699"><strong>redefines</strong></font> Header-Record. </span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#000000"><strong> </strong></font><font color="#000000"><strong>*</strong></font><font color="#000000"><strong> </strong></font>     ......           
</font></pre>
  </li>
  <li>Defined as seperate sub-records. In this case the you would use <b>Write ... From</b> in Cobol. For this use <font color="blue">CopybookLoader.SPLIT_HIGHEST_REPEATING</font>:
<pre>
<font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#ff0000">01</font>  The-Records.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">05</font>  Header-Record.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">10</font>  record-type               <font color="#006699"><strong>pic</strong></font> x.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">*</font><font color="#cc6600"> </font>     ......
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">05</font>  Detail-Record.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">10</font>  record-type               <font color="#006699"><strong>pic</strong></font> x.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">......</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>
</font>
</pre>
  </li>
  <li>Seperate Copybooks - not really support. You could combine the records manually or 
  do it after reading in. If some one needs this format, please contact me.
 </ul>
<h2><a id="Csv">Reading Writing Csv Files</a></h2>
<p>In JRecord, the only difference between reading and writing a Csv file is the schema
definition, after that the code is basically identical. Csv-file schemas can be defined
in the Java code or in <a href="#XmlSchema">Xml Schema</a>.
<p>There will be <b>changes</b> in the Csv processing in Version <b>0.80.8</b> !!! 
 
<h3>Define Csv Schemas in Java Code</h3>
<p>For <b>Reading</b> Csv file with <b>field names</b> on the <b>first line</b>, it can be defined simply by:
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">44 </font></span>                LayoutDetail inSchema  <font color="#000000"><strong>=</strong></font> ExternalRecord 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">45 </font></span>                                                .<font color="#9966ff">newCsvRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Constants.IO_NAME_1ST_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">46 </font></span>                                                .<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">47 </font></span>                  <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">Define</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">output</font><font color="#ff8400"> </font><font color="#ff8400">record</font><font color="#ff8400"> </font><font color="#ff8400">(with</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">fields)</font>
</font></pre>
 <p>For <b>Writing</b> Csv files or reading Csv files <b>with out</b> names on the first line you must define the fields:
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">48 </font></span>                LayoutDetail outSchema 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">49 </font></span>                    <font color="#000000"><strong>=</strong></font> ExternalRecord
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">50 </font></span>                        .<font color="#9966ff">newCsvRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Constants.IO_NAME_1ST_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">51 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Sku</font><font color="#ff00cc">&quot;</font>,   Type.ftChar, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">52 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">&quot;</font>, Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">53 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font>,  Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">54 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">&quot;</font>,  Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">55 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">&quot;</font>,   Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">56 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Price</font><font color="#ff00cc">&quot;</font>, Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">57 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">GST</font><font color="#ff00cc">&quot;</font>,   Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">58 </font></span>                        .<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">59 </font></span>
</font></pre>
<p>See <a href="Source/JRecord/src/net/sf/JRecord/zExamples/csv/XmplLineIO5a">XmplLineIO5a</a> for an example of Reading and writing a Csv <b>with names on the first line</b> of the file.
<p>See <a href="Source/JRecord/src/net/sf/JRecord/zExamples/csv/XmplLineIO5n">XmplLineIO5n</a> for an example of Reading and writing a Csv <b>with-out names on the first line</b> of the file.
<p>
<p>Currently the default Csv parser does not change " <--> "" in Csv fields. This will change in the next version.
You can change to the Standard_Parser (code=1) which will do the conversion this conversion.

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span>                LayoutDetail inSchema  <font color="#000000"><strong>=</strong></font> ExternalRecord 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>                                                .<font color="#9966ff">newCsvRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Constants.IO_NAME_1ST_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>                                                .<font color="#9966ff">asExternalRecord</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>                                                   .<font color="#9966ff">setRecordStyle</font><font color="#000000"><strong>(</strong></font>ParserManager.STANDARD_CSV_PARSER<font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span>                                                .<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
</font></pre>

<p/>
<p>Basically a Csv program looks like:

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">45 </font></span>                LayoutDetail inSchema  <font color="#000000"><strong>=</strong></font> ExternalRecord 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">46 </font></span>                                                .<font color="#9966ff">newCsvRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Constants.IO_NAME_1ST_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">47 </font></span>                                                .<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">48 </font></span>                  <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">Define</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">output</font><font color="#ff8400"> </font><font color="#ff8400">record</font><font color="#ff8400"> </font><font color="#ff8400">(with</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">fields)</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">49 </font></span>                LayoutDetail outSchema 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">50 </font></span>                    <font color="#000000"><strong>=</strong></font> ExternalRecord
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">51 </font></span>                        .<font color="#9966ff">newCsvRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Constants.IO_NAME_1ST_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">;</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#6600cc">\&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">52 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Sku</font><font color="#ff00cc">&quot;</font>,   Type.ftChar, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">53 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">&quot;</font>, Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">54 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font>,  Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">55 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">&quot;</font>,  Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">56 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">&quot;</font>,   Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">57 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Price</font><font color="#ff00cc">&quot;</font>, Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">58 </font></span>                            .<font color="#9966ff">addCsvField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">GST</font><font color="#ff00cc">&quot;</font>,   Type.ftNumAnyDecimal, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">59 </font></span>                        .<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">60 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">61 </font></span>                AbstractLine outCsvRecord <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>new</strong></font> <font color="#9966ff">Line</font><font color="#000000"><strong>(</strong></font>outSchema<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">62 </font></span>                
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">63 </font></span>                LineIOProvider ioProvider <font color="#000000"><strong>=</strong></font> LineIOProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">64 </font></span>                AbstractLineReader reader <font color="#000000"><strong>=</strong></font> ioProvider.<font color="#9966ff">getLineReader</font><font color="#000000"><strong>(</strong></font>inSchema<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">65 </font></span>                AbstractLineWriter writer <font color="#000000"><strong>=</strong></font> ioProvider.<font color="#9966ff">getLineWriter</font><font color="#000000"><strong>(</strong></font>outSchema<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">66 </font></span>                
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">67 </font></span>                CommonBits.<font color="#9966ff">setUseCsvLine</font><font color="#000000"><strong>(</strong></font><font color="#cc00cc">true</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">68 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">69 </font></span>                reader.<font color="#9966ff">open</font><font color="#000000"><strong>(</strong></font>salesFile, inSchema<font color="#000000"><strong>)</strong></font>;       <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">Open</font><font color="#ff8400"> </font><font color="#ff8400">with</font><font color="#ff8400"> </font><font color="#ff8400">a</font><font color="#ff8400"> </font><font color="#ff8400">null</font><font color="#ff8400"> </font><font color="#ff8400">layout</font><font color="#ff8400"> </font><font color="#ff8400">and</font><font color="#ff8400"> </font><font color="#ff8400">let</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">reader</font><font color="#ff8400"> </font><font color="#ff8400">create</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">schema</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">70 </font></span>                writer.<font color="#9966ff">open</font><font color="#000000"><strong>(</strong></font>salesFileOut<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">71 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">72 </font></span>                <font color="#006699"><strong>while</strong></font> <font color="#000000"><strong>(</strong></font><font color="#000000"><strong>(</strong></font>saleRecord <font color="#000000"><strong>=</strong></font> reader.<font color="#9966ff">read</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>!</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">73 </font></span>                    lineNum <font color="#000000"><strong>+</strong></font><font color="#000000"><strong>=</strong></font> <font color="#ff0000">1</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">74 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">75 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Sku</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>  .<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">76 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">77 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font> .<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">78 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font> .<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">79 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>  .<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">-</font><font color="#ff00cc">Sold</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">80 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">GST</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>  .<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">81 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">82 </font></span>                    price <font color="#000000"><strong>=</strong></font>  saleRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asBigDecimal</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">83 </font></span>                    gstExclusive <font color="#000000"><strong>=</strong></font> price.<font color="#9966ff">divide</font><font color="#000000"><strong>(</strong></font>GST_CONVERSION, <font color="#ff0000">2</font>, RoundingMode.HALF_DOWN<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">84 </font></span>                    gst <font color="#000000"><strong>=</strong></font> price.<font color="#9966ff">subtract</font><font color="#000000"><strong>(</strong></font>gstExclusive<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">85 </font></span>                    
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">86 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Price</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>gstExclusive<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">87 </font></span>                    outCsvRecord.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">GST</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>  .<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>gst<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">88 </font></span>            
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">89 </font></span>                    writer.<font color="#9966ff">write</font><font color="#000000"><strong>(</strong></font>outCsvRecord<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">90 </font></span>                <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">91 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">92 </font></span>                reader.<font color="#9966ff">close</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">93 </font></span>                writer.<font color="#9966ff">close</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">94 </font></span>            <font color="#000000"><strong>}</strong></font> <font color="#006699"><strong>catch</strong></font> <font color="#000000"><strong>(</strong></font>Exception e<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
</font></pre>



<h3>Csv files using a Xml-Schema</h3>
<p>You can define a <b>Csv-Schema</b> as an Xml file:
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#0099ff"><strong>&lt;?</strong></font><font color="#0099ff"><strong>xml</strong></font><font color="#0099ff"><strong> </strong></font><font color="#0099ff"><strong>version=&quot;1.0&quot;</strong></font><font color="#0099ff"><strong> </strong></font><font color="#0099ff"><strong>encoding=&quot;UTF-8&quot;?</strong></font><font color="#0099ff"><strong>&gt;</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">RECORD</font><font color="#0000ff"> </font><font color="#0000ff">RECORDNAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">COPYBOOK</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">DELIMITER</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">;</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">FILESTRUCTURE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">CSV_NAME_1ST_LINE</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">STYLE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">0</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">RECORDTYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Delimited</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">LIST</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">N</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">QUOTE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#cc00cc">&amp;</font><font color="#cc00cc">quot</font><font color="#cc00cc">;</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">RecSep</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">default</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">LINE_NO_FIELD_NAMES</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">1</font><font color="#ff00cc">&quot;</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">FIELDS</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Sku</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">1</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Char</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">2</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">NumAnyDecimal</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">3</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">NumAnyDecimal</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">4</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">NumAnyDecimal</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">5</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">NumAnyDecimal</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Price</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">6</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">NumAnyDecimal</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">GST</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">7</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">NumAnyDecimal</font><font color="#ff00cc">&quot;</font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">FIELDS</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">RECORD</font><font color="#0000ff">&gt;</font>
</font></pre>

<p>For an example of using a <b>Xml-Schema</b>, see <a href="Source/JRecord/src/net/sf/JRecord/zExamples/csv/XmplLineIO5x">XmplLineIO5x</a>.

  
 <h2><a id="XmlSchema">Xml Schema</a></h2>
 <p>You can also use a Xml schema instead of a Cobol Copybook, see <a href="Source/JRecord/src/net/sf/JRecord/zExamples/recordEditorXml/readWrite">Xml Schema Examples</a>
 for more details.
 <p>You can also merge Record-Selection and Record-Hierarchy details from a Xml-Schema with field-definitions from a Cobol-Copybook. 
 See <a href="Source/JRecord/src/net/sf/JRecord/zExamples/recordEditorXml/readWrite/AmsReceipt03.java">AmsReceipt03</a> for an example
 of this.
 <p>You could create the <b>Xml-Schema</b> using the <a href="#RecordEditor">RecordEditor</a>.
 <p>Simple Fixed-Width Xml schema:</p>
 <pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 2 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">RECORD</font><font color="#0000ff"> </font><font color="#0000ff">RECORDNAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">COPYBOOK</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DTAR020</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">DELIMITER</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#cc00cc">&amp;</font><font color="#cc00cc">lt</font><font color="#cc00cc">;</font><font color="#ff00cc">Tab</font><font color="#cc00cc">&amp;</font><font color="#cc00cc">gt</font><font color="#cc00cc">;</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 3 </font></span><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">FONTNAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">CP037</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">FILESTRUCTURE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Default</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">STYLE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">0</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">RECORDTYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">RecordLayout</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 4 </font></span><font color="#0000ff">        </font><font color="#0000ff">LIST</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Y</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">QUOTE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">RecSep</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">default</font><font color="#ff00cc">&quot;</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 5 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">FIELDS</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 6 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">KEYCODE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">1</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">LENGTH</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">8</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Char</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 7 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">STORE</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">9</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">LENGTH</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">2</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Mainframe</font><font color="#ff00cc"> </font><font color="#ff00cc">Packed</font><font color="#ff00cc"> </font><font color="#ff00cc">Decimal</font><font color="#ff00cc"> </font><font color="#ff00cc">(</font><font color="#ff00cc">comp</font><font color="#ff00cc">-</font><font color="#ff00cc">3</font><font color="#ff00cc">)</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 8 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DATE</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">11</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">LENGTH</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">4</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Mainframe</font><font color="#ff00cc"> </font><font color="#ff00cc">Packed</font><font color="#ff00cc"> </font><font color="#ff00cc">Decimal</font><font color="#ff00cc"> </font><font color="#ff00cc">(</font><font color="#ff00cc">comp</font><font color="#ff00cc">-</font><font color="#ff00cc">3</font><font color="#ff00cc">)</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 9 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">DEPT</font><font color="#ff00cc">-</font><font color="#ff00cc">NO</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">15</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">LENGTH</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">2</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Mainframe</font><font color="#ff00cc"> </font><font color="#ff00cc">Packed</font><font color="#ff00cc"> </font><font color="#ff00cc">Decimal</font><font color="#ff00cc"> </font><font color="#ff00cc">(</font><font color="#ff00cc">comp</font><font color="#ff00cc">-</font><font color="#ff00cc">3</font><font color="#ff00cc">)</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">10 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">QTY</font><font color="#ff00cc">-</font><font color="#ff00cc">SOLD</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">17</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">LENGTH</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">5</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Mainframe</font><font color="#ff00cc"> </font><font color="#ff00cc">Packed</font><font color="#ff00cc"> </font><font color="#ff00cc">Decimal</font><font color="#ff00cc"> </font><font color="#ff00cc">(</font><font color="#ff00cc">comp</font><font color="#ff00cc">-</font><font color="#ff00cc">3</font><font color="#ff00cc">)</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">11 </font></span>                <font color="#0000ff">&lt;</font><font color="#0000ff">FIELD</font><font color="#0000ff"> </font><font color="#0000ff">NAME</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">SALE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRICE</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">POSITION</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">22</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">LENGTH</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">6</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">DECIMAL</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">2</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">TYPE</font><font color="#0000ff">=</font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Mainframe</font><font color="#ff00cc"> </font><font color="#ff00cc">Packed</font><font color="#ff00cc"> </font><font color="#ff00cc">Decimal</font><font color="#ff00cc"> </font><font color="#ff00cc">(</font><font color="#ff00cc">comp</font><font color="#ff00cc">-</font><font color="#ff00cc">3</font><font color="#ff00cc">)</font><font color="#ff00cc">&quot;</font><font color="#0000ff"> </font><font color="#0000ff">/</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">12 </font></span>        <font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">FIELDS</font><font color="#0000ff">&gt;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">13 </font></span><font color="#0000ff">&lt;</font><font color="#0000ff">/</font><font color="#0000ff">RECORD</font><font color="#0000ff">&gt;</font>
</font></pre>
 
 <h2><a id="RecordEditor">RecordEditor</a></h2>
 <p>The <a href="http://record-editor.sourceforge.net/">RecordEditor</a> is useful several ways to JRecord users:<ul>
  <li>Can Edit / compare your data files.</li>
  <li>For  files without Cobol-Copybooks, The <b>RecordEditors</b> <a href="Docs/RecordEditor_Wizard.htm">File-Wizard</a> can guide you through creating
Schema that can then be Exported as an Xml schema.
</li>
  <li>You can import your Cobol Copybook / Xml Schema into the <a href="http://record-editor.sourceforge.net/">RecordEditor</a>,
 update the Copybook (adding say Record-Selection details), edit Files using the schema, then export the Copybook as a Xml-Schema that can be used in JRecord. See <a href="#XmlSchema">Xml Schema</a> for details
 on using a Xml-Schema in JRecord. The Xml schema can be used directly or could be merged with the Cobol Schema.
</ul>
 
 <p>Following is a Cobol Copybook and the <b>RecordEditor</b> screens used to import, Update and Export it as a Xml-Schema.

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#ff0000">01</font>  HEADER-TRAILER-RECORD-LAYOUT.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">05</font>  HEADER-RECORD.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>         <font color="#ff0000">10</font> HDR-RECORD-TYPE              <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">01</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">05</font>  SUB-HEADER-RECORD  <span style="background:yellow">  <font color="#006699"><strong>redefines</strong></font> HEADER-RECORD.  </span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>         <font color="#ff0000">10</font> SHDR-RECORD-TYPE.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>            <font color="#ff0000">15</font> SHDR-RECORD-CODE          <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">01</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>            <font color="#ff0000">15</font> SHDR-RECORD-INDEX         <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">01</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">05</font>  DETAIL-DATA-RECORD <span style="background:yellow">  <font color="#006699"><strong>redefines</strong></font> HEADER-RECORD.  </span> 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  13 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>         <font color="#ff0000">10</font> DDR-RECORD-TYPE              <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">01</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  14 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  15 </font></span><font color="#cc6600"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  16 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">05</font>  TRAILER-RECORD     <span style="background:yellow">  <font color="#006699"><strong>redefines</strong></font> HEADER-RECORD.  </span>  
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  17 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>         <font color="#ff0000">10</font> TLR-RECORD-TYPE              <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">01</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  18 </font></span>      <font color="#cc6600">*</font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600">.</font><font color="#cc6600"> </font><font color="#cc6600"> </font>
</font></pre>

<p/> 
<p/>
<h3>Importing into the RecordEditor</h3>
<p>You can import a Cobol-Copybook into the RecordEditor, update the Copbook, then write out
the copybook out as a <b>Xml-Schema</b> that can be used in JRecord directly or by merging by merging details from Xml-Schema with the Cobol-Copybook.
This could be useful if you have multi-record files.
<p>In the RecordEditor, select <b>Record Layouts &gt;&gt;&gt; Load Cobol Copyboo</b>.
</p><p>
<img src="Diagram/import01.png"/>
</p>
<p>I made the following changes to the screen:<ul>
 <li><b>Split On:</b> On Redefine</li>
 <li><b>Binary Format:</b> Mainframe - does not actual matter as there are no comp / signed fields</li>
 <li><b>File Structure:</b> Text - assuming normal Windows / unix text file; use fixed if records are length delimited</li>
</ul>
<p/> 
<p/>
<h3>Selection Field update and export</h3>
<img src="Diagram/import02.png"/>
</p>
<p>I made the following changes to the screen:<ul>
 <li><b>Record Type:</b> Group of Records - not really needed</li>
 <li><b>Table Updates:</b> Added the <b>Control Field names</b> and the <b>Field Values</b>  If you want to make a particular-record the default record<ol>
   <li>Leave the <b>field name</b> blank</li>
   <li>Set the <b>Field value</b> to * as below
 <p/> 
 <img src="Diagram/import03.png"/>
 </li>
</ul>
<p/>
<p>
<span style="background:yellow"><font color="blue"><b>Once</b></font> the screen has been filled out, hit the <font color="blue"><b>Save as Xml</b></font> <b>button</b> second 
from the right at the top of the screen. This will save it back as a Xml-Schema.</span>
 

 <h2><a id="NoSchema">Fixed Width file no Cobol Copybook</a></h2>
 <p>If you do not have a Cobol Copybook; you can:<ul>
   <li>Define the file-schema in the Java-Code. This works well for simple files.</li>
   <li>Use a Xml-Schema. You can use the <a href="Docs/RecordEditor_Wizard.htm">File-Wizard</a> in the <b>RecordEditor</b> to create the schema.</li>
 </ul>
 
 <h3>Defining a Fixed-Width Schema in Java</h3>
 <p>You can define a Fixed-width File-Schema in java by field-position or field-length or both
 <p>Define by <b>field-position</b>:
 <pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">26 </font></span>                    ExternalRecord
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">27 </font></span>                        .<font color="#9966ff">newFixedWidthRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">My_Record</font><font color="#ff00cc">&quot;</font>, Constants.IO_TEXT_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">28 </font></span>                            .<font color="#9966ff">addFieldByPosition</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Sku</font><font color="#ff00cc">&quot;</font>  , Type.ftChar             ,  <font color="#ff0000">1</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">29 </font></span>                            .<font color="#9966ff">addFieldByPosition</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">&quot;</font>, Type.ftNumRightJustified,  <font color="#ff0000">9</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">30 </font></span>                            .<font color="#9966ff">addFieldByPosition</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font> , Type.ftNumRightJustified, <font color="#ff0000">12</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">31 </font></span>                            .<font color="#9966ff">addFieldByPosition</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">&quot;</font> , Type.ftNumRightJustified, <font color="#ff0000">18</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">32 </font></span>                            .<font color="#9966ff">addFieldByPosition</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">&quot;</font>  , Type.ftNumRightJustified, <font color="#ff0000">21</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">33 </font></span>                            .<font color="#9966ff">addFieldByPosition</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Price</font><font color="#ff00cc">&quot;</font>, Type.ftNumRightJustified, <font color="#ff0000">23</font>, <font color="#ff0000">6</font>, <font color="#ff0000">2</font><font color="#000000"><strong>)</strong></font>; 
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">34 </font></span>                            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">Need</font><font color="#ff8400"> </font><font color="#ff8400">to</font><font color="#ff8400"> </font><font color="#ff8400">define</font><font color="#ff8400"> </font><font color="#ff8400">both</font><font color="#ff8400"> </font><font color="#ff8400">position</font><font color="#ff8400"> </font><font color="#ff8400">and</font><font color="#ff8400"> </font><font color="#ff8400">length</font><font color="#ff8400"> </font><font color="#ff8400">for</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">last</font><font color="#ff8400"> </font><font color="#ff8400">field</font>
</font></pre>

<p>Define by <b>field-length</b>:
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">25 </font></span>            LayoutDetail schema <font color="#000000"><strong>=</strong></font> ExternalRecord
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">26 </font></span>                                    .<font color="#9966ff">newFixedWidthRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">My_Record</font><font color="#ff00cc">&quot;</font>, Constants.IO_TEXT_LINE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">27 </font></span>                                        .<font color="#9966ff">addFieldByLength</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Sku</font><font color="#ff00cc">&quot;</font>  , Type.ftChar,   <font color="#ff0000">8</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">28 </font></span>                                        .<font color="#9966ff">addFieldByLength</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Store</font><font color="#ff00cc">&quot;</font>, Type.ftNumRightJustified, <font color="#ff0000">3</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">29 </font></span>                                        .<font color="#9966ff">addFieldByLength</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Date</font><font color="#ff00cc">&quot;</font> , Type.ftNumRightJustified, <font color="#ff0000">6</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">30 </font></span>                                        .<font color="#9966ff">addFieldByLength</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Dept</font><font color="#ff00cc">&quot;</font> , Type.ftNumRightJustified, <font color="#ff0000">3</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">31 </font></span>                                        .<font color="#9966ff">addFieldByLength</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Qty</font><font color="#ff00cc">&quot;</font>  , Type.ftNumRightJustified, <font color="#ff0000">2</font>, <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">32 </font></span>                                        .<font color="#9966ff">addFieldByLength</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Price</font><font color="#ff00cc">&quot;</font>, Type.ftNumRightJustified, <font color="#ff0000">6</font>, <font color="#ff0000">2</font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">33 </font></span>                                    .<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">34 </font></span>            AbstractLine saleRecord;
</font></pre>

<p>
<p>For Example programs see:<ul>
 <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/noCopybook/DefineSchemaUsingPosition.java">DefineSchemaUsingPosition.java</a></li>
 <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/noCopybook/DefineSchemaUsingLengths.java.java">DefineSchemaUsingLengths.java</a></li>
 <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/noCopybook/DefineSchemaUsingPosLength.java">DefineSchemaUsingPosLength.java</a></li>
</ul>
 <h3>Using Xml schema</h3>
 <p>If you have a Fixed-Width file with no existing Cobol-Copbook / Xml-Schema, 
 you could setup either a Cobol-Copybook or <a href="XmlSchema">Xml Schema</a> by hand.
 An alternative is to 
 use the <a href="Docs/RecordEditor_Wizard.htm">File-Wizard</a> in the <b>RecordEditor</b> to create the Xml-Schema.
 Once you have an Xml-Schema, you can load it with
 <pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">41 </font></span>                CopybookLoader loader <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>new</strong></font> <font color="#9966ff">RecordEditorXmlLoader</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">42 </font></span>                LayoutDetail layout <font color="#000000"><strong>=</strong></font> loader.<font color="#9966ff">loadCopyBook</font><font color="#000000"><strong>(</strong></font>copybookName, <font color="#ff0000">0</font>, <font color="#ff0000">0</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, <font color="#ff0000">0</font>, <font color="#ff0000">0</font>, <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asLayoutDetail</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">43 </font></span>                
</font></pre>
 
 <p>There are a number of examples reading / writing files using Xml-Schemas 
 <a href="Source/JRecord/src/net/sf/JRecord/zExamples/recordEditorXml/readWrite/">here</a> 
 
 
 

 
 <h2><a id="Utilities">Utilities</a></h2>
 <p>Because of the way it works, <B>JRecord</B> is very good at writing generic utilities (e.g. Cobol to Csv).
 <p><b>Utility examples</b> include <a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/toCsv/Cobol2Csv.java">Cobol2Csv</a>,
<a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/toCsv/Csv2Cobol.java">Csv2Cobol</a>,
<a href="Source/JRecord/src/net/sf/JRecord/zExamples/copy/Cobol2Cobol.java">Cobol2Cobol</a>
or <a href="Source/JRecord/src/net/sf/JRecord/zExamples/utilities/copy/XmplLineIO9.java">XmplLineIO9</a>. In general look at the code in
directories:<ul>
 <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/toCsv/">Source/JRecord/src/net/sf/JRecord/zExamples/cobol/toCsv/</a></li>
 <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/utilities/copy/">Source/JRecord/src/net/sf/JRecord/zExamples/utilities/copy/</a></li>
</ul>
<p><b>Note:</b> These utility programs where written as example programs for <b>Java</b> programmers.
Overtime they will become useful standalone programs. So please <b>test</b> thoroughly and <b>report</b> any issues !!!.
 
 <p> following is an example from a generic Schema based copy method:

<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 94 </font></span>        RecordDetail outRecordDef <font color="#000000"><strong>=</strong></font> outSchema.<font color="#9966ff">getRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 95 </font></span>        RecordDetail inRecordDef  <font color="#000000"><strong>=</strong></font> inSchema .<font color="#9966ff">getRecord</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 96 </font></span>        <font color="#0099ff"><strong>int</strong></font> fieldCount <font color="#000000"><strong>=</strong></font> outRecordDef.<font color="#9966ff">getFieldCount</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 97 </font></span>        <font color="#0099ff"><strong>boolean</strong></font> missingFields <font color="#000000"><strong>=</strong></font> <font color="#cc00cc">false</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 98 </font></span>        ArrayList<font color="#000000"><strong>&lt;</strong></font>FieldDetail<font color="#000000"><strong>&gt;</strong></font> fieldMapping <font color="#000000"><strong>=</strong></font> <font color="#006699"><strong>new</strong></font> ArrayList<font color="#000000"><strong>&lt;</strong></font>FieldDetail<font color="#000000"><strong>&gt;</strong></font><font color="#000000"><strong>(</strong></font>fieldCount<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 99 </font></span>        <font color="#0099ff"><strong>int</strong></font> lineNumber <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">100 </font></span>        <font color="#0099ff"><strong>int</strong></font> fldNum <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">101 </font></span>        
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">102 </font></span>        <font color="#006699"><strong>try</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">103 </font></span>            <font color="#006699"><strong>for</strong></font> <font color="#000000"><strong>(</strong></font><font color="#0099ff"><strong>int</strong></font> i <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>; i <font color="#000000"><strong>&lt;</strong></font> fieldCount; i<font color="#000000"><strong>+</strong></font><font color="#000000"><strong>+</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">104 </font></span>                fieldMapping.<font color="#9966ff">add</font><font color="#000000"><strong>(</strong></font>inRecordDef.<font color="#9966ff">getField</font><font color="#000000"><strong>(</strong></font>outRecordDef.<font color="#9966ff">getField</font><font color="#000000"><strong>(</strong></font>i<font color="#000000"><strong>)</strong></font>.<font color="#9966ff">getLookupName</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">105 </font></span>                <font color="#006699"><strong>if</strong></font> <font color="#000000"><strong>(</strong></font>fieldMapping.<font color="#9966ff">get</font><font color="#000000"><strong>(</strong></font>fieldMapping.<font color="#9966ff">size</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>-</strong></font> <font color="#ff0000">1</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>=</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">106 </font></span>                    System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">No</font><font color="#ff00cc"> </font><font color="#ff00cc">Field</font><font color="#ff00cc"> </font><font color="#ff00cc">Match</font><font color="#ff00cc"> </font><font color="#ff00cc">found</font><font color="#ff00cc"> </font><font color="#ff00cc">for</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> outRecordDef.<font color="#9966ff">getField</font><font color="#000000"><strong>(</strong></font>i<font color="#000000"><strong>)</strong></font>.<font color="#9966ff">getLookupName</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">107 </font></span>                    missingFields <font color="#000000"><strong>=</strong></font> <font color="#cc00cc">true</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">108 </font></span>                <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">109 </font></span>            <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">110 </font></span>            
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">111 </font></span>            <font color="#006699"><strong>if</strong></font> <font color="#000000"><strong>(</strong></font>missingFields<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">112 </font></span>                System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">113 </font></span>                System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Input</font><font color="#ff00cc"> </font><font color="#ff00cc">File</font><font color="#ff00cc"> </font><font color="#ff00cc">Fields</font><font color="#ff00cc">:</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">114 </font></span>                <font color="#006699"><strong>for</strong></font> <font color="#000000"><strong>(</strong></font><font color="#0099ff"><strong>int</strong></font> i <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>; i <font color="#000000"><strong>&lt;</strong></font> inRecordDef.<font color="#9966ff">getFieldCount</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>; i<font color="#000000"><strong>+</strong></font><font color="#000000"><strong>+</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">115 </font></span>                    System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> inRecordDef.<font color="#9966ff">getField</font><font color="#000000"><strong>(</strong></font>i<font color="#000000"><strong>)</strong></font>.<font color="#9966ff">getName</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">116 </font></span>                <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">117 </font></span>            <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">118 </font></span>            
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">119 </font></span>            
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">120 </font></span>            <font color="#006699"><strong>while</strong></font> <font color="#000000"><strong>(</strong></font>inLine <font color="#000000"><strong>!</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">121 </font></span>                lineNumber <font color="#000000"><strong>+</strong></font><font color="#000000"><strong>=</strong></font> <font color="#ff0000">1</font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">122 </font></span>                <font color="#006699"><strong>for</strong></font> <font color="#000000"><strong>(</strong></font>fldNum <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>; fldNum <font color="#000000"><strong>&lt;</strong></font> fieldCount; fldNum<font color="#000000"><strong>+</strong></font><font color="#000000"><strong>+</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">123 </font></span>                    AbstractFieldValue fieldValue <font color="#000000"><strong>=</strong></font> outLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font><font color="#ff0000">0</font>, fldNum<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">124 </font></span>                    <font color="#006699"><strong>if</strong></font> <font color="#000000"><strong>(</strong></font>fieldMapping.<font color="#9966ff">get</font><font color="#000000"><strong>(</strong></font>fldNum<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>=</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">125 </font></span>                        fieldValue.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>CommonBits.NULL_VALUE<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">126 </font></span>                    <font color="#000000"><strong>}</strong></font> <font color="#006699"><strong>else</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">127 </font></span>                        String s <font color="#000000"><strong>=</strong></font> inLine.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>fieldMapping.<font color="#9966ff">get</font><font color="#000000"><strong>(</strong></font>fldNum<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">128 </font></span>                        <font color="#006699"><strong>if</strong></font> <font color="#000000"><strong>(</strong></font>s <font color="#000000"><strong>=</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font> <font color="#000000"><strong>|</strong></font><font color="#000000"><strong>|</strong></font> s.<font color="#9966ff">length</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>=</strong></font><font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">129 </font></span>                            fieldValue.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>CommonBits.NULL_VALUE<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">130 </font></span>                        <font color="#000000"><strong>}</strong></font> <font color="#006699"><strong>else</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">131 </font></span>                            fieldValue.<font color="#9966ff">set</font><font color="#000000"><strong>(</strong></font>s<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">132 </font></span>                        <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">133 </font></span>                    <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">134 </font></span>                <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">135 </font></span>                writer.<font color="#9966ff">write</font><font color="#000000"><strong>(</strong></font>outLine<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">136 </font></span>                inLine <font color="#000000"><strong>=</strong></font> reader.<font color="#9966ff">read</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">137 </font></span>            <font color="#000000"><strong>}</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">138 </font></span>        <font color="#000000"><strong>}</strong></font> <font color="#006699"><strong>catch</strong></font> <font color="#000000"><strong>(</strong></font>Exception e<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">139 </font></span>            System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Error</font><font color="#ff00cc"> </font><font color="#ff00cc">at</font><font color="#ff00cc"> </font><font color="#ff00cc">Line</font><font color="#ff00cc">,</font><font color="#ff00cc"> </font><font color="#ff00cc">field_Number</font><font color="#ff00cc">:</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> lineNumber <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#ff00cc">,</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> <font color="#000000"><strong>(</strong></font>fldNum <font color="#000000"><strong>+</strong></font> <font color="#ff0000">1</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font> e<font color="#000000"><strong>)</strong></font>;
</font></pre>

<h2><a id="manipulateSchema">Manipulating Schema's</a></h2>
 <p>Loading Cobol Copybooks (schema's) is a 2 step process:<ol>
 <li>Load Cobol / Xml as a <b>ExternalRecord</b></li>
 <li>Convert <b>ExternalRecord</b> to a <b>LayoutDetail</b></li>
</ol>
<p>The <b>ExternalRecord</b> class should viewed as a 
<a href="http://en.wikipedia.org/wiki/Builder_pattern">Builder</a> class for LayoutDetail (or internal schema).
An <b>ExternalRecord</b> can be read from disk, manipulated, written back to disk or converted to a <b>LayoutDetail</b>
for use in JRecord.
<p>The following programs all manipulate <b>ExternalRecord's</b>:<ul>
  <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/toCsv/Cobol2Csv.java">Cobol2Csv</a> creates Csv schema 
from the input cobol Schema, it then uses it to copy the cobol-file to a Csv file.</li>
   <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/recordEditorXml/manipulate/ConvertCbl2CsvRecordEditorXml01.java">ConvertCbl2CsvRecordEditorXml01</a>
  Reads in a Cobol-Copybook, converts it to a Csv-Schema then writes it out as a <b>Xml-schema</b>. The <b>Xml-Schema</b> could be used to write Csv file with
  the same field names as in the Cobol-Copybook</li>
  <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/recordEditorXml/manipulate/ConvertCbl2RecordEditorXml02.java">ConvertCbl2RecordEditorXml02</a>
  Reads in a Cobol-Copybook, renames some fields (actually duplicate field-names) then writes out a New <b>Xml-schema</b> </li>
</ul>
 <h2><a id="DuplicateFields">Duplicate Field names</a></h2>
 <p>If you have duplicate field names in a Cobol-Copybook, you can use
 the <b>getUniqueFieldGroupsInSequence</b> and <b>getUniqueField</b> methods of the 
 RecordDetail class.
 For exaples, See<ul>
   <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/specialCases/Xmpl_DuplicateNames1.java">Xmpl_DuplicateNames1</a></li>
   <li><a href="Source/JRecord/src/net/sf/JRecord/zExamples/cobol/specialCases/Xmpl_DuplicateNames2.java">Xmpl_DuplicateNames2</a></li>
 </ul>
 <p>
 <p><b>Note: </b> There may be replacement methods written (with these methods being depreciated).
 h3>Accessing Fields using group names.</h3>
<p>For the following copybook</p>
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 2 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 3 </font></span><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066">0</font><font color="#ff0066">1</font><font color="#ff0066"> </font><font color="#ff0066">COMPANY-RECORD.</font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font><font color="#ff0066"> </font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 4 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>  <font color="#ff0000">05</font> COMPANY-NAME     <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">30</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066"> 5 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>  <font color="#ff0000">05</font> EMPLOYEE-LIST.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 6 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">10</font> PRESIDENT.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 7 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> LAST-NAME  <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">15</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 8 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> FIRST-NAME <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">8</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000"> 9 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">10</font> VICE-PRESIDENT.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">10 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> LAST-NAME  <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">15</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">11 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> FIRST-NAME <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">8</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">12 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>     <font color="#ff0000">10</font> OTHERS.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">13 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> <font color="#006699"><strong>TITLE</strong></font>      <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">10</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">14 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> LAST-NAME  <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">15</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">15 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>        <font color="#ff0000">15</font> FIRST-NAME <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">8</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">16 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>  <font color="#ff0000">05</font> <font color="#006699"><strong>ADDRESS</strong></font>          <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">15</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">17 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>  <font color="#ff0000">05</font> CITY             <font color="#006699"><strong>PIC</strong></font> X(<font color="#ff0000">15</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">18 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>  <font color="#ff0000">05</font> STATE            <font color="#006699"><strong>PIC</strong></font> XX.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">19 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>  <font color="#ff0000">05</font> ZIP              <font color="#006699"><strong>PIC</strong></font> <font color="#ff0000">9</font>(<font color="#ff0000">5</font>)            .
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">20 </font></span>
</font></pre>

<p>You can retrive duplicate fields as follows</p>
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span>            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">Create</font><font color="#ff8400"> </font><font color="#ff8400">an</font><font color="#ff8400"> </font><font color="#ff8400">Internal</font><font color="#ff8400"> </font><font color="#ff8400">JRecord</font><font color="#ff8400"> </font><font color="#ff8400">schema</font><font color="#ff8400"> </font><font color="#ff8400">(or</font><font color="#ff8400"> </font><font color="#ff8400">layout)</font><font color="#ff8400"> </font><font color="#ff8400">from</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">cobol</font><font color="#ff8400"> </font><font color="#ff8400">copybook</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>        LayoutDetail schema <font color="#000000"><strong>=</strong></font> TestCommonCode.<font color="#9966ff">getLayoutFromCobolStr</font><font color="#000000"><strong>(</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>                cobolCopybook, <font color="#ff00cc">&quot;</font><font color="#ff00cc">COMPANY</font><font color="#ff00cc">-</font><font color="#ff00cc">RECORD</font><font color="#ff00cc">&quot;</font>,
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>                CopybookLoader.SPLIT_NONE, <font color="#ff00cc">&quot;</font><font color="#ff00cc">&quot;</font>, Convert.FMT_INTEL<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">   5 </font></span>        <font color="#0099ff"><strong>int</strong></font> recordIdx <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>;  <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">since</font><font color="#ff8400"> </font><font color="#ff8400">there</font><font color="#ff8400"> </font><font color="#ff8400">is</font><font color="#ff8400"> </font><font color="#ff8400">only</font><font color="#ff8400"> </font><font color="#ff8400">one</font><font color="#ff8400"> </font><font color="#ff8400">record</font><font color="#ff8400"> </font><font color="#ff8400">type,</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">record</font><font color="#ff8400"> </font><font color="#ff8400">index</font><font color="#ff8400"> </font><font color="#ff8400">must</font><font color="#ff8400"> </font><font color="#ff8400">be</font><font color="#ff8400"> </font><font color="#ff8400">zero</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   6 </font></span>                            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">If</font><font color="#ff8400"> </font><font color="#ff8400">there</font><font color="#ff8400"> </font><font color="#ff8400">where</font><font color="#ff8400"> </font><font color="#ff8400">more</font><font color="#ff8400"> </font><font color="#ff8400">than</font><font color="#ff8400"> </font><font color="#ff8400">one</font><font color="#ff8400"> </font><font color="#ff8400">record,</font><font color="#ff8400"> </font><font color="#ff8400">you</font><font color="#ff8400"> </font><font color="#ff8400">could</font><font color="#ff8400"> </font><font color="#ff8400">use:</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   7 </font></span>                            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400"> </font><font color="#ff8400"> </font><font color="#ff8400"> </font><font color="#ff8400">schema.getRecordIndex(&quot;COMPANY-RECORD&quot;);</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   8 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   9 </font></span>            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">Retrieve</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">Record-Definition</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  10 </font></span>        RecordDetail record <font color="#000000"><strong>=</strong></font> schema.<font color="#9966ff">getRecord</font><font color="#000000"><strong>(</strong></font>recordIdx<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  11 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  12 </font></span>            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">**</font><font color="#ff8400"> </font><font color="#ff8400">Retrieve</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">Field</font><font color="#ff8400"> </font><font color="#ff8400">definitions</font><font color="#ff8400"> </font><font color="#ff8400">from</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">RecordDefinition</font><font color="#ff8400"> </font><font color="#ff8400">**</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  13 </font></span>            <font color="#ff8400">//</font><font color="#ff8400"> </font><font color="#ff8400">**</font><font color="#ff8400"> </font><font color="#ff8400">--------------------------------------------------------</font><font color="#ff8400"> </font><font color="#ff8400">**</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  14 </font></span>        IFieldDetail presidentFirstNameFld     <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">FIRST</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">PRESIDENT</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  15 </font></span>        IFieldDetail vicePresidentFirstNameFld <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">FIRST</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">VICE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRESIDENT</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  16 </font></span>        IFieldDetail otherFirstNameFld         <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">FIRST</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">OTHERS</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  17 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  18 </font></span>        IFieldDetail presidentLastNameFld      <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">LAST</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">PRESIDENT</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  19 </font></span>        IFieldDetail vicePresidentLastNameFld  <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">LAST</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">VICE</font><font color="#ff00cc">-</font><font color="#ff00cc">PRESIDENT</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  20 </font></span>        IFieldDetail otherLastNameFld          <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueField</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">LAST</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">OTHERS</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  21 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  22 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  23 </font></span>            <font color="#ff8400">//Get</font><font color="#ff8400"> </font><font color="#ff8400">the</font><font color="#ff8400"> </font><font color="#ff8400">compane-name</font><font color="#ff8400"> </font><font color="#ff8400">field</font><font color="#ff8400"> </font><font color="#ff8400">definition.</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  24 </font></span>        IFieldDetail companyNameFld <font color="#000000"><strong>=</strong></font> schema.<font color="#9966ff">getFieldFromName</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">COMPANY</font><font color="#ff00cc">-</font><font color="#ff00cc">NAME</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  25 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  26 </font></span>        AbstractLineReader reader  <font color="#000000"><strong>=</strong></font> LineIOProvider.<font color="#9966ff">getInstance</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>.<font color="#9966ff">getLineReader</font><font color="#000000"><strong>(</strong></font>Constants.IO_BIN_TEXT<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  27 </font></span>        AbstractLine line;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  28 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  29 </font></span>        reader.<font color="#9966ff">open</font><font color="#000000"><strong>(</strong></font><font color="#006699"><strong>new</strong></font> <font color="#9966ff">ByteArrayInputStream</font><font color="#000000"><strong>(</strong></font>dataFile.<font color="#9966ff">getBytes</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>, schema<font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  30 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  31 </font></span>        <font color="#006699"><strong>while</strong></font> <font color="#000000"><strong>(</strong></font><font color="#000000"><strong>(</strong></font>line <font color="#000000"><strong>=</strong></font> reader.<font color="#9966ff">read</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>!</strong></font><font color="#000000"><strong>=</strong></font> <font color="#cc00cc">null</font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  32 </font></span>            System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  33 </font></span>                      line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>companyNameFld<font color="#000000"><strong>)</strong></font>           .<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  34 </font></span>                    <font color="#000000"><strong>+</strong></font> line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>presidentFirstNameFld<font color="#000000"><strong>)</strong></font>    .<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  35 </font></span>                    <font color="#000000"><strong>+</strong></font> line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>presidentLastNameFld<font color="#000000"><strong>)</strong></font>     .<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">|</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  36 </font></span>                    <font color="#000000"><strong>+</strong></font> line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>vicePresidentFirstNameFld<font color="#000000"><strong>)</strong></font>.<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  37 </font></span>                    <font color="#000000"><strong>+</strong></font> line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>vicePresidentLastNameFld<font color="#000000"><strong>)</strong></font> .<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">|</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  38 </font></span>                    <font color="#000000"><strong>+</strong></font> line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>otherFirstNameFld<font color="#000000"><strong>)</strong></font>        .<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>+</strong></font> <font color="#ff00cc">&quot;</font><font color="#6600cc">\t</font><font color="#ff00cc">&quot;</font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  39 </font></span>                    <font color="#000000"><strong>+</strong></font> line.<font color="#9966ff">getFieldValue</font><font color="#000000"><strong>(</strong></font>otherLastNameFld<font color="#000000"><strong>)</strong></font>         .<font color="#9966ff">asString</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">  40 </font></span>            <font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">  41 </font></span>        <font color="#000000"><strong>}</strong></font>
</font></pre>
Some key points
<ol>
  <li>You must retrieve the <i>Record-Definition</i> from the <i>layout-definition</i> (schema). 
  For single record files, the record-index will be 0; for multi-record files you need to find the record-index.</li>
  <li>You must retrieve JRecords internal <i>field-definition</i> and use this to access field values.
</ol>

<h3>Accessing Fields when there are duplicate field-names and duplicate group-names.</h3>
<p>When there are both duplicate field and group names, you the group-sequence method <b>getUniqueFieldGroupsInSequence</b></p>
<p>For the following copybook:</p>
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">2 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font> A.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">3 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>       <font color="#ff0000">05</font> B.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">4 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>          <font color="#ff0000">07</font> Field-1    <font color="#006699"><strong>pic</strong></font> x(<font color="#ff0000">3</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#990066">5 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font> B.                                       
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">6 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>       <font color="#ff0000">05</font> A.
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">7 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>          <font color="#ff0000">07</font> Field-1    <font color="#006699"><strong>pic</strong></font> s9(<font color="#ff0000">6</font>).
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">8 </font></span><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font><font color="#cc6600"> </font>    <font color="#ff0000">03</font> C.
</font></pre>
<p>You can access the fields by:</p>
<pre><font color="#000000"><span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   1 </font></span>
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   2 </font></span>        IFieldDetail abField <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueFieldGroupsInSequence</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Field</font><font color="#ff00cc">-</font><font color="#ff00cc">1</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">A</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">B</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   3 </font></span>        IFieldDetail baField <font color="#000000"><strong>=</strong></font> record.<font color="#9966ff">getUniqueFieldGroupsInSequence</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">Field</font><font color="#ff00cc">-</font><font color="#ff00cc">1</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">B</font><font color="#ff00cc">&quot;</font>, <font color="#ff00cc">&quot;</font><font color="#ff00cc">A</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
<span style="background:#dbdbdb; border-right:solid 2px black; margin-right:5px; "><font color="#000000">   4 </font></span>
</font></pre>

 

